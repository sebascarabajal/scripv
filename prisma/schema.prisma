generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model preguntas_gral {
  id_pregunta_gral Int @id @default(autoincrement())
  pregunta_gral_txt String
  respuestas_gral respuestas_gral[]
}

model respuestas_gral {
  CodCasa String
  id_pregunta_gral Int
  respuesta_gral_valor String
  Encuestas Encuestas @relation(fields: [CodCasa], references: [CodCasa])
  preguntas_gral preguntas_gral @relation(fields: [id_pregunta_gral], references: [id_pregunta_gral])

  @@id([CodCasa, id_pregunta_gral])
}

model Encuestas {
  CodCasa String @id
  id_Usuario Int
  id_respuestas_gral Int
  id_respuestas_estruc Int
  fecha DateTime @default(now())
  Usuarios Usuarios @relation(fields: [id_Usuario], references: [id_Usuario])
  respuestas_gral respuestas_gral[]
  respuestas_estruc respuestas_estruc[]
}

model Usuarios {
  id_Usuario Int @id 
  Nombre String
  Apellido String
  Email String
  Password String
  Tipo_usuario String
  Creado DateTime @default(now())
  Modificado DateTime @default(now())
  Encuestas Encuestas[]
}

model preguntas_estruc {
  id_estruct_preg Int @id @default(autoincrement())
  estruc_preg_txt String
  respuestas_estruc respuestas_estruc[]
}

model respuestas_estruc {
  CodCasa String
  id_estruct_preg Int
  respuesta_estruc Int
  Encuestas Encuestas @relation(fields: [CodCasa], references: [CodCasa])
  preguntas_estruc preguntas_estruc @relation(fields: [id_estruct_preg], references: [id_estruct_preg])

  @@id([CodCasa, id_estruct_preg])
}