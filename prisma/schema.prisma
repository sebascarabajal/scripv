generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model preguntas_gral {
  id_pregunta_gral Int @id
  pregunta_gral_txt String
  respuestas_gral respuestas_gral[]
}

model respuestas_gral {
  id_rg Int @id @default(autoincrement())
  CodCasa String
  id_pregunta_gral Int
  respuesta_gral_valor String
  preguntas_gral preguntas_gral @relation(fields: [id_pregunta_gral], references: [id_pregunta_gral])
  Encuestas Encuestas @relation(fields: [CodCasa], references: [CodCasa])
}

model Encuestas {
  CodCasa String @id
  id_Usuario Int
  fecha DateTime @default(now())
  Usuarios Usuarios @relation(fields: [id_Usuario], references: [id_Usuario])
  respuestas_gral respuestas_gral[]
  respuestas_estruc respuestas_estruc[]
}

model Usuarios {
  id_Usuario  Int @id @default(autoincrement())
  id_censista Int 
  Nombre String
  Apellido String
  Email String @unique
  Password String
  Tipo_usuario String 
  Creado DateTime @default(now())
  Encuestas Encuestas[]
}

model preguntas_estruc {
  id_estruct_preg Int @id
  estruc_preg_txt String
  respuestas_estruc respuestas_estruc[]
}

model respuestas_estruc {
  id_re Int @id @default(autoincrement())
  CodCasa String
  id_estruct_preg Int
  respuesta_estruc String
  preguntas_estruc preguntas_estruc @relation(fields: [id_estruct_preg], references: [id_estruct_preg])
  Encuestas Encuestas @relation(fields: [CodCasa], references: [CodCasa])
}